// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file.
//
// Read Sprockets README (https://github.com/sstephenson/sprockets#sprockets-directives) for details
// about supported directives.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require cbpAnimatedHeader
//= require classie
//= require countdown
//= require freelancer
//= require twitter/typeahead
//= require handlebars
$(document).ready(function (){
    $('#sign_up').popover({
        html: true,
        content : function() {
            return $('#attend-popover').html();
        },
        placement : 'bottom'

    });

    $('#attending-list').popover({
        html: true,
        content : function() {
            return $('#attending-list-tooltip').html();
        },
        placement : 'bottom',
        trigger : 'hover'
    });

    $('#user-info-toggle').popover({
        html: true,
        content : function() {
            return $('#user-info-popover').html();
        },
        template : '<div class="popover user-popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content user-popover-content"></div></div>',
        placement : 'bottom',
        trigger : 'click'
    });

    $('#hello').tooltip({
        title:"hello",
        trigger:"hover"
    })

    $('body').tooltip({
        selector: '[data-tooltip=tooltip]'}
    );



    $('.modal-content').css({
        "background" : function (){
            var url = "assets/" + this.getAttribute('data-name') + "/cover.jpg";
            return "url(" + url + ") no-repeat center center fixed";
        },
        "-webkit-background-size": "cover",
        "-moz-background-size": "cover",
        "-o-background-size": "cover",
        "background-size": "cover"
    })


    // Twitter typeahead exmaple.

    // instantiate the bloodhound suggestion engine
    var numbers = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        limit: 10,
        prefetch: {
            url: '../teams/show.json',
            filter: function (list) {
                alert("hello");
                return $.map(list, function (team) {
                    formatData(team);
                    return { name: team.name };
                });

            }
        }
    });

    // initialize the bloodhound suggestion engine
    numbers.initialize();



    // instantiate the typeahead UI
    $('#team-searcher').typeahead(null, {
        displayKey: 'name',
        source: numbers.ttAdapter(),
        templates: {
            suggestion: Handlebars.compile([
                '<img class="img-circle own-profile-img" src="http://graph.facebook.com/1568088149/picture?height=65&width=65">',
                '<p>{{name}}</p>'
            ].join(''))
        }
    })
        .on('typeahead:selected', function (e, datum) {
                $('#team_name').val(datum.name);
                $('#team-form').submit();
        })
    ;

});




